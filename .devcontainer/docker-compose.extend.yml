services:
  # Sidecar container used only for the VS Code Dev Container session.
  # It doesn't run the app; it just keeps a shell alive so the editor can attach
  # and stay connected even if you restart other services.
  devcontainer:
    image: e621
    user: ${DOCKER_USER:-root}
    volumes:
      - ..:/app
      - ../docker/danbooru_local_config.rb:/app/config/danbooru_local_config.rb
      - node_modules:/app/node_modules
    environment:
      RAILS_ENV: development
    entrypoint: sh -lc "while sleep 1000; do :; done"
    tty: true

