<%= tag.article(**article_attributes) do %>
  <%= link_to polymorphic_path(link_target, link_params), class: "post-link", data: { hover_text: tooltip_text } do %>
    <% if should_render_image? %>
      <%= tag.picture do %>
        <%= tag.source type: "image/webp", srcset: preview_urls[0] if webp_enabled? %>
        <%= tag.source type: "image/jpeg", srcset: preview_urls[1] %>
        <%= tag.img src: preview_urls[1], alt: alt_text %>
      <% end %>
    <% end %>
  <% end %>
  <% if show_stats? %>
    <div class="desc rating-<%= @post.rating %>">
      <span class="desc-a">
        <span class="desc-m score <%= score_class %>">
          <%= helpers.svg_icon(score_icon) %>
          <%= shortened_score %>
        </span>
        <span class="desc-m favorites">
          <%= helpers.svg_icon(:star) %>
          <%= @post.fav_count %>
        </span>
        <span class="desc-m comments">
          <%= helpers.svg_icon(:messages_square) %>
          <%= @post.visible_comment_count(@user) %>
        </span>
      </span>
      <span class="desc-b rating"><%= @post.rating.upcase %></span>
    </div>
  <% end %>
<% end %>
