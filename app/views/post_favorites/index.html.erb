<div id="c-post-favorites">
  <div id="a-index">
    <h1>Post Favorites</h1>
    <%= render(PostThumbnailComponent.new(post: @post)) %>

    <div class="styled-dtext" style="margin: 1rem 0;">
      <blockquote>
        <p>
          Some users may be excluded from this list due to their <a href="/users/settings?find=privacy">privacy settings</a>.
          <% if CurrentUser.user.enable_privacy_mode? %>
            <br /><b>This includes you.</b>
          <% end %>
        </p>
        <% if @post.fav_count > 1000 %>
          <p>
            <b>Note:</b> This post has a large number of favorites.<br />
            Page count may or may not be accurate.
          </p>
        <% end %>
      </blockquote>
    </div>

    <table class="striped">
      <thead>
        <tr>
          <th>Favorited by</th>
          <th>Other Favorites</th>
        </tr>
      </thead>
      <tbody>
        <% @users.each do |user| %>
          <tr>
            <td>
              <%= link_to_user user %>
            </td>
            <td>
              <%= link_to(user.favorite_count, favorites_path(:user_id => user.id)) %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
    <%= render PaginatorComponent.new(records: @users) %>
  </div>
</div>

<%= render "posts/partials/common/secondary_links" %>

<% content_for(:page_title) do %>
  Post Favorites - #<%= params[:post_id] %>
<% end %>
