<div class="flag-dialog-preview">

  <div class="flag_post">
    <%= PostPresenter.preview(@post, show_deleted: true, no_blacklist: true) %>
  </div>


  <div class="dtext-container">
    <%= format_text(WikiPage.titled(Danbooru.config.flag_notice_wiki_page)&.body) %>
  </div>
</div>


<div class="flag-dialog-body">

  <%= error_messages_for :post_flag %>

  <%= custom_form_for(post_flag) do |f| %>
    <%= f.hidden_field :post_id %>

    <% PostFlagReason.cached.values.each do |reason| %>
      <% if reason.name == "uploading_guidelines" && !@post.flaggable_for_guidelines? %>
        <% next %>
      <% end %>

      <label>
        <%= radio_button_tag "post_flag[reason_name]", reason.name, false %>
        <span class="flag-reason-title"><%= format_text(reason.reason, inline: true) %></span>
        <div class="dtext-container flag-reason-text"><%= format_text(reason.text) %></div>
      </label>

      <% if reason.parent? %>
        <%= f.input :parent_id, as: :string, label: "Post #" %>
      <% end %>

    <% end %>

    <div>
      <%= f.submit "Submit" %>
    </div>
  <% end %>
</div>
