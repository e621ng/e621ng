<div id="c-users">
  <div id="a-search">
    <%= simple_form_for(:search, url: users_path, method: :get, defaults: { required: false }, html: { class: "inline-form" }) do |f| %>
      <%= f.input :name_matches, label: "Name", hint: "Use * for wildcard", input_html: { value: params.dig(:search, :name_matches), data: { autocomplete: "user" } } %>

      <% if CurrentUser.is_admin? %>
        <%= f.input :email_matches, label: "Email", hint: "Use * for wildcard", input_html: { value: params.dig(:search, :email_matches) }  %>
      <% end %>

      <%= f.input :level, collection: User.level_hash.to_a, include_blank: true, selected: params.dig(:search, :level) %>
      <%= f.input :min_level, collection: User.level_hash.to_a, include_blank: true, selected: params.dig(:search, :min_level) %>
      <%= f.input :max_level, collection: User.level_hash.to_a, include_blank: true, selected: params.dig(:search, :max_level) %>

      <%= f.input :can_upload_free, label: "Unrestricted uploads?", collection: [%w[Yes true], %w[No false]], include_blank: true, selected: params.dig(:search, :can_upload_free) %>
      <%= f.input :can_approve_posts, label: "Approver?", collection: [%w[Yes true], %w[No false]], include_blank: true, selected: params.dig(:search, :can_approve_posts) %>

      <%= f.input :order, collection: [["Join date", "date"], ["Name", "name"], ["Uploads", "post_upload_count"], ["Post changes", "post_update_count"], ["Note changes", "note_count"], ["Wiki changes", "wiki_edit_count"],
                                       ["Artist changes", "artist_edit_count"], ["Pool changes", "pool_edit_count"], ["Forum posts", "forum_post_count"], ["Comments", "comment_count"]], selected: params.dig(:search, :order) %>
      <%= f.submit "Search" %>
    <% end %>
  </div>
</div>

<%= render "secondary_links" %>

<% content_for(:page_title) do %>
  Search Users
<% end %>
